### WeMeet ：基于LanceNet v1.1.0 构建的云会议（客户端）✨

#### 一、架构设计

​	在应用层，一个急需解决的问题是各类消息如何打包和发送，如何处理拆包和封包等，本项目借鉴了分层的思想，优雅简洁的搞定了各类消息的发送和接收，分层的架构设计也大大降低了项目的复杂度，架构设计概览如下：

- 通信组件：第一层：自定义消息打包格式，该层自动处理封包拆包；第二层：结合typename字段，对拆包的数据利
  用Protobuf进行消息反射，再根据Message类型字段实现消息分发；实现了不同消息类型（File，Text，Media等）处理的
  大一统。
- 媒体组件：简易封装了FFmpeg库，提供更加易用的回调接口；使用H.264算法压缩图像、使用Opus编解码音频，大大节省
  了带宽，实现了极低的延迟和实时的音视频聊天体验；封装了PortAudio库，提供了更加易用的接口来捕获和播放音频；
- GUI界面：使用QT搭建图形界面，同时本客户端使用的底层通信基于QT Network库，同时实现了客户端的跨平台。

#### 二、**技术概览**

1. 前端使用Win10 Qt 5.14.2 + MSVC2019 构建的UI，和QT内置的网络类 Qt Network
2. 后端使用 ubuntu18.04 + LanceNet v.1.1.0（本人另外一个项目，参见个人Github主页） 开发

   1. 消息打包：设计了一个Packet类型，自动处理封包和拆包、主要包含长度，typename和proto payload，用于封装protobuf序列化后的数据，typename实现**消息反射**
   2. 消息序列化和反序列：应用程序为每种类型的消息（FILE，Text，Video等）设计了一个**通用**的protobuf::Message 格式，其中使用类型字段type标识具体的payload的消息类型，实现**消息分发**
   3. 数据压缩
      1. 对于视频数据，使用**H.264算法压缩、解码**，大大节省了带宽
      2. 对于音频数据，使用[Opus](https://www.opus-codec.org/)库压缩、解码
   4. 简单封装了ffmpeg库，**提供了回调机制**：将ffmpeg中原本**异步**的编码和解码转换成了回调的方式**通知数据就绪**，简化了客户端代码
   5. 封装了[PortAudio](http://portaudio.com/docs/v19-doxydocs/index.html)库，提供了更加易用的接口来捕获和播放音频（PCM格式）
   6. 【TODO】有效的处理视频**音频帧乱序**和**音视频同步**的问题

#### 三、**主要功能**

1. 在会议**文字聊天**，可以私发消息和给全体发送消息

2. 聊天发送表情，图片等

3. 聊天框**上传、下载文件**

4. **视频聊天**

5. 语音聊天

   

🎯【注意】本项目仅为客户端代码，服务端见 [LanceNet](https://github.com/LACHENNG/LanceNet) 项目`apps/chat/server 目录`
